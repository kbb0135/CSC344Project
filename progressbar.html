<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="progressbar.css">
    <title>Progress Report</title>
</head>

<body>
    <div class="container">
        <h1> Progress Report of Quizzes</h1>

        <div class="progress" id="progress_0">
            <h4>Quiz 1</h4>
            <div class="progress-bar">
                <div class="progressing"></div>
                <span class="circle"></span>
            </div>
            <p class="percent">0%</p>
        </div>

        <div class="progress" id="progress_1">
            <h4>Quiz 2</h4>
            <div class="progress-bar">
                <div class="progressing"></div>
                <span class="circle"></span>
            </div>
            <p class="percent">0%</p>
        </div>

        <div class="progress" id="progress_2">
            <h4>Quiz 3</h4>
            <div class="progress-bar">
                <div class="progressing"></div>
                <span class="circle"></span>
            </div>
            <p class="percent">0%</p>
        </div>
        <div class="progress" id="progress_3">
            <h4>Quiz 4</h4>
            <div class="progress-bar">
                <div class="progressing"></div>
                <span class="circle"></span>
            </div>
            <p class="percent">0%</p>
        </div>

        <div class="progress" id="progress_4">
            <h4>Quiz 5</h4>
            <div class="progress-bar">
                <div class="progressing"></div>
                <span class="circle"></span>
            </div>
            <p class="percent">0%</p>
        </div>

    </div>
    <script type = module src="progressbar.js"></script>
</body>
<script type = "module">
    
//export {quiz1} from '/progressbar.js';
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
import { getDatabase,set, ref,update, child, get,push} from "https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js";
import { getAuth, signInWithEmailAndPassword,onAuthStateChanged, signOut} from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";
const firebaseConfig = {
    apiKey: "AIzaSyD4pas0pvQQovr1vpT5QlBYWR_1OthDUEI",
    authDomain: "dataapp-8bc6d.firebaseapp.com",
    databaseURL: "https://dataapp-8bc6d-default-rtdb.firebaseio.com",
    projectId: "dataapp-8bc6d",
    storageBucket: "dataapp-8bc6d.appspot.com",
    messagingSenderId: "1052775979865",
    appId: "1:1052775979865:web:b8de5ba5d832e93b18ca48"
  };

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const dbRef = ref(getDatabase());
const auth = getAuth();
export const score1=0;
onAuthStateChanged(auth, (user) => {
    //const uid = user.uid;
    if(user) {
        const uid = user.uid;
        get(child(dbRef, `users/${uid}`)).then((snapshot) => {
  if (snapshot.exists()) {
    console.log(snapshot.val());
     var quizTest  = snapshot.val().score;
     

     sessionStorage.setItem("quizTest", quizTest);
     console.log(sessionStorage.getItem("quizTest"));
     window.location.reload;
  } else {
    console.log("No data available");
    console.log("Test1");
  }
}).catch((error) => {
  console.error(error);
});

        
}
else { 
    console.log("No data available");
    sessionStorage.removeItem("quizTest");
}
})
</script>
</html>